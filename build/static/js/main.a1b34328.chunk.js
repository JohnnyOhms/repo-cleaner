(this["webpackJsonprepo-cleaner"]=this["webpackJsonprepo-cleaner"]||[]).push([[7],{60:function(e,t,n){e.exports=n.p+"static/media/trash.d22e9eed.svg"},64:function(e,t,n){e.exports=n(91)},70:function(e,t,n){var a={"./ion-action-sheet-ios.entry.js":[95,11],"./ion-action-sheet-md.entry.js":[96,12],"./ion-alert-ios.entry.js":[97,13],"./ion-alert-md.entry.js":[98,14],"./ion-app_8-ios.entry.js":[99,15],"./ion-app_8-md.entry.js":[100,16],"./ion-avatar_3-ios.entry.js":[101,33],"./ion-avatar_3-md.entry.js":[102,34],"./ion-back-button-ios.entry.js":[103,35],"./ion-back-button-md.entry.js":[104,36],"./ion-backdrop-ios.entry.js":[105,77],"./ion-backdrop-md.entry.js":[106,78],"./ion-button_2-ios.entry.js":[107,37],"./ion-button_2-md.entry.js":[108,38],"./ion-card_5-ios.entry.js":[109,39],"./ion-card_5-md.entry.js":[110,40],"./ion-checkbox-ios.entry.js":[111,41],"./ion-checkbox-md.entry.js":[112,42],"./ion-chip-ios.entry.js":[113,43],"./ion-chip-md.entry.js":[114,44],"./ion-col_3.entry.js":[115,79],"./ion-datetime_3-ios.entry.js":[116,21],"./ion-datetime_3-md.entry.js":[117,22],"./ion-fab_3-ios.entry.js":[118,45],"./ion-fab_3-md.entry.js":[119,46],"./ion-img.entry.js":[120,80],"./ion-infinite-scroll_2-ios.entry.js":[121,81],"./ion-infinite-scroll_2-md.entry.js":[122,82],"./ion-input-ios.entry.js":[123,47],"./ion-input-md.entry.js":[124,48],"./ion-item-option_3-ios.entry.js":[125,49],"./ion-item-option_3-md.entry.js":[126,50],"./ion-item_8-ios.entry.js":[127,51],"./ion-item_8-md.entry.js":[128,52],"./ion-loading-ios.entry.js":[129,53],"./ion-loading-md.entry.js":[130,54],"./ion-menu_3-ios.entry.js":[131,55],"./ion-menu_3-md.entry.js":[132,56],"./ion-modal-ios.entry.js":[133,17],"./ion-modal-md.entry.js":[134,18],"./ion-nav_2.entry.js":[135,29],"./ion-popover-ios.entry.js":[136,19],"./ion-popover-md.entry.js":[137,20],"./ion-progress-bar-ios.entry.js":[138,57],"./ion-progress-bar-md.entry.js":[139,58],"./ion-radio_2-ios.entry.js":[140,59],"./ion-radio_2-md.entry.js":[141,60],"./ion-range-ios.entry.js":[142,61],"./ion-range-md.entry.js":[143,62],"./ion-refresher_2-ios.entry.js":[144,23],"./ion-refresher_2-md.entry.js":[145,24],"./ion-reorder_2-ios.entry.js":[146,31],"./ion-reorder_2-md.entry.js":[147,32],"./ion-ripple-effect.entry.js":[148,83],"./ion-route_4.entry.js":[149,63],"./ion-searchbar-ios.entry.js":[150,64],"./ion-searchbar-md.entry.js":[151,65],"./ion-segment_2-ios.entry.js":[152,66],"./ion-segment_2-md.entry.js":[153,67],"./ion-select_3-ios.entry.js":[154,68],"./ion-select_3-md.entry.js":[155,69],"./ion-slide_2-ios.entry.js":[156,84],"./ion-slide_2-md.entry.js":[157,85],"./ion-spinner.entry.js":[158,27],"./ion-split-pane-ios.entry.js":[159,86],"./ion-split-pane-md.entry.js":[160,87],"./ion-tab-bar_2-ios.entry.js":[161,70],"./ion-tab-bar_2-md.entry.js":[162,71],"./ion-tab_2.entry.js":[163,30],"./ion-text.entry.js":[164,72],"./ion-textarea-ios.entry.js":[165,73],"./ion-textarea-md.entry.js":[166,74],"./ion-toast-ios.entry.js":[167,75],"./ion-toast-md.entry.js":[168,76],"./ion-toggle-ios.entry.js":[169,25],"./ion-toggle-md.entry.js":[170,26],"./ion-virtual-scroll.entry.js":[171,88]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=70,e.exports=r},72:function(e,t,n){var a={"./ion-icon.entry.js":[173,91]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=72,e.exports=r},77:function(e,t,n){},78:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(32),c=n.n(o),s=n(9),i=n(3),l=n(57),u=(n(77),n(10)),m=(n(78),n(21)),d=n(8),p=n.n(d),g=n(25),y=n(59),b=n.n(y),j=n(31),E=n(63),h=n(42),O=n(18),f=localStorage.getItem("login"),v=localStorage.getItem("token"),x={login:!!f,loginLoading:!1,repoLoading:!1,repos:[],user:localStorage.getItem("user"),avatar:"./dummy.png",token:!!v,selected:[],error:!1,avatarLoading:!1,showToast:!1},k={login:!1,loginLoading:!1,repoLoading:!1,repos:[],user:null,avatar:"./dummy.png",token:!1,selected:[],error:!1,avatarLoading:!1,showToast:!1},_=n(11),w=p.a.mark(R),L=p.a.mark(D),I=p.a.mark(N),T=p.a.mark(S),A=p.a.mark(G);function R(e){var t,n,a,r,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),n=localStorage.getItem("user"),a=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.next=6,Object(_.c)({type:"REPOLOADING",payload:{loading:!0}});case 6:return e.next=8,a(3e3);case 8:if(n){e.next=17;break}return e.next=11,Object(_.c)({type:"AVATARLOADING",payload:{loading:!0}});case 11:return e.next=13,Object(_.c)({type:"LOGINLOADING",payload:{loading:!0}});case 13:return e.next=15,Object(_.c)({type:"GETUSER",payload:{token:t}});case 15:e.next=23;break;case 17:return e.next=19,Object(_.c)({type:"AVATARLOADING",payload:{loading:!0}});case 19:r=new Image(100,200),o="https://github.com/".concat(n,".png"),r.src=o,r.onload=function(){(0,F.dispatch)({type:"AVATARLOADING",payload:{loading:!1}})};case 23:return e.next=25,Object(_.b)(fetch,"https://api.github.com/user/repos",{headers:{Authorization:"token ".concat(t)},cache:"no-cache"});case 25:return c=e.sent,e.next=28,c.json();case 28:return s=e.sent,console.log(s),s=s.map((function(e){return{full_name:e.full_name,html_url:e.html_url,name:e.name}})),e.next=33,Object(_.c)({type:"REPOLOADING",payload:{loading:!1}});case 33:return e.next=35,Object(_.c)({type:"REPOS",payload:{repos:s}});case 35:e.next=41;break;case 37:return e.prev=37,e.t0=e.catch(0),e.next=41,Object(_.c)({type:"ERROR",payload:{error:e.t0}});case 41:case"end":return e.stop()}}),w,null,[[0,37]])}function D(){var e,t,n;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(_.c)({type:"REPOLOADING",payload:{loading:!0}});case 3:return e=localStorage.getItem("token"),a.next=6,Object(_.c)({type:"DELETING",payload:{complete:!1}});case 6:return a.next=8,Object(_.d)((function(e){return e.selected}));case 8:return t=a.sent,console.log("selectec ccccccccccccccccis ",t),a.next=12,Object(_.a)(t.map((function(t){return console.log("raterererer"),Object(_.b)(fetch,"https://api.github.com/repos/".concat(t),{headers:{Authorization:"token ".concat(e)},method:"DELETE"})})));case 12:return n=a.sent,console.log(n,"bbbbbbbbbbbbbbbbbbbbbbbbbb"),a.next=16,Object(_.c)({type:"GETREPO"});case 16:return a.next=18,Object(_.c)({type:"DELETING",payload:{complete:!0}});case 18:a.next=25;break;case 20:return a.prev=20,a.t0=a.catch(0),console.log(a.t0),a.next=25,Object(_.c)({type:"ERROR",payload:{error:a.t0}});case 25:case"end":return a.stop()}}),L,null,[[0,20]])}function N(e){var t,n,a,r,o;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("best is baest"),c.prev=1,t=e.payload.token,c.next=5,Object(_.b)(fetch,"https://api.github.com/user",{headers:{Authorization:"token ".concat(t)},cache:"no-cache"});case 5:return n=c.sent,c.next=8,n.json();case 8:return a=c.sent,console.log("user iss ".concat(a)),localStorage.setItem("user",a.login),localStorage.setItem("login","true"),c.next=14,Object(_.c)({type:"LOGINLOADING",payload:{user:a.login,loading:!1}});case 14:r=new Image(100,200),o="https://github.com/".concat(a.login,".png"),r.src=o,r.onload=function(){(0,F.dispatch)({type:"AVATARLOADING",payload:{loading:!1}})},c.next=24;break;case 20:return c.prev=20,c.t0=c.catch(1),c.next=24,Object(_.c)({type:"ERROR",payload:c.t0});case 24:case"end":return c.stop()}}),I,null,[[1,20]])}function S(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.c)({type:"RESET"});case 2:window.location.href="https://github.com/logout";case 3:case"end":return e.stop()}}),T)}function G(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("bat"),e.next=3,Object(_.e)("GETREPO",R);case 3:return e.next=5,Object(_.e)("GETUSER",N);case 5:return e.next=7,Object(_.e)("DELREPO",D);case 7:return e.next=9,Object(_.e)("LOGOUT",S);case 9:case"end":return e.stop()}}),A)}var C=Object(E.a)(),P=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||j.c,U=Object(j.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(console.log("in reducer"),t.type){case"LOGIN":t.payload.val;return Object(O.a)({},e);case"LOGINLOADING":var n=t.payload,a=n.user,r=n.loading;return Object(O.a)(Object(O.a)({},e),{},{user:a,loginLoading:r,login:!0});case"REPOLOADING":var o=t.payload.loading;return console.log("chikn",o),Object(O.a)(Object(O.a)({},e),{},{repoLoading:o});case"AVATARLOADING":var c,s=t.payload.loading;if(s)c="./loader.gif";else{var i=localStorage.getItem("user");c="https://github.com/".concat(i,".png")}return Object(O.a)(Object(O.a)({},e),{},{avatar:c});case"REPOS":var l=t.payload.repos;return Object(O.a)(Object(O.a)({},e),{},{repos:l});case"SHOWTOAST":var u=t.payload.showToast;return Object(O.a)(Object(O.a)({},e),{},{showToast:u});case"AVATAR":t.payload.val;return Object(O.a)({},e);case"TOKEN":t.payload.val;return Object(O.a)({},e);case"SELECTED":var m=t.payload.repo,d=Object(h.a)(e.selected);return d=d.includes(m)?d.filter((function(e){return e!=m})):[].concat(Object(h.a)(e.selected),[m]),console.log(d),Object(O.a)(Object(O.a)({},e),{},{selected:d});case"DELETING":var p=t.payload.complete,g=Object(h.a)(e.selected);return p&&(g=[]),Object(O.a)(Object(O.a)({},e),{},{showToast:p,selected:g});case"RESET":return localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("login"),Object(O.a)({},k);default:return e}}),P(Object(j.a)(C)));C.run(G),f&&U.dispatch({type:"GETREPO"});var z,F=U;function M(){return V.apply(this,arguments)}function V(){return(V=Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){(new b.a).authenticate({provider:"github",scope:"user,delete_repo"},(function(n,a){n&&t(n),console.log(a.token),z=a.token,localStorage.setItem("token",z),F.dispatch({type:"GETREPO",payload:{Token:z}}),console.log("ben"),e(a)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e})),n={text:"Login",icon:u.i};t.user?(n.text="Signout",n.icon=u.j):(n.text="Login",n.icon=u.i);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.w,{side:"start",contentId:"first",menuId:"first"},r.a.createElement(i.p,null,r.a.createElement(i.H,{color:"primary"},r.a.createElement(i.F,null,"Repo Cleaner"))),r.a.createElement("span",{id:"first"}),r.a.createElement(i.l,null,r.a.createElement(i.d,{className:"ion-margin "},r.a.createElement("img",{src:t.avatar})),r.a.createElement(i.E,{class:"ion-margin"},t.user),r.a.createElement(i.v,null,r.a.createElement(i.s,{onClick:function(){t.login?e({type:"LOGOUT"}):M()}},r.a.createElement("a",null,r.a.createElement(i.q,{icon:n.icon,className:"ion-margin-end"}),n.text)),r.a.createElement(i.s,null,r.a.createElement("a",{href:"https://www.google.com",target:"_blank"},r.a.createElement(i.q,{icon:u.k,className:"ion-margin-end"}),"Fork@GitHub"))))))},H=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e})),n={text:"Login",icon:u.i};t.user?(n.text="Signout",n.icon=u.j):(n.text="Login",n.icon=u.i);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.p,null,r.a.createElement(i.H,null,r.a.createElement(i.x,{slot:"start"}),r.a.createElement(i.F,{slot:"start"},r.a.createElement(i.q,{id:"repoIcon",icon:u.h}),r.a.createElement(i.E,null,r.a.createElement("span",{id:"repoTitle"},"Repo Cleaner"))),r.a.createElement(i.E,{slot:"primary",className:"ion-margin ion-hide-md-down",onClick:function(){t.login?e({type:"LOGOUT"}):M()}},r.a.createElement("a",{href:"https://www.google.com",target:"_blank"},n.text)),r.a.createElement(i.E,{slot:"primary",className:"ion-margin"},r.a.createElement("a",{href:"https://www.google.com",target:"_blank"},r.a.createElement(i.q,{icon:u.k}))),r.a.createElement(i.d,{id:"avatar",slot:"primary",className:"ion-padding ion-hide-md-down"},r.a.createElement("img",{id:"avatarImg",src:t.avatar})))),r.a.createElement(q,null))},B=function(){var e=Object(m.c)((function(e){return e.showToast}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.G,{isOpen:e,message:"Deletion completed",duration:200}))},X=n(62),W=n(60),J=n.n(W),K=function(){var e,t=Object(a.useState)(!1),n=Object(X.a)(t,2),o=n[0],c=n[1],s=Object(m.c)((function(e){return e})),l=Object(m.b)();console.log("user is ".concat(s.user));var d,p=s.repos;p.length&&!s.repoLoading?(console.log("hi"),d=!0):(console.log(p.length),d=!1);var g={input:s.selected.map((function(e){return{name:"repo",type:"checkbox",label:e,checked:!0,disabled:!0}})),message:s.selected.length?"Sure to delete?":"Nothing selected"};return r.a.createElement(i.l,null,r.a.createElement(i.z,{slot:"fixed",onIonRefresh:function(e){l({type:"GETREPO"}),setTimeout((function(){console.log("Async operation has ended"),e.detail.complete()}),2e3)},closeDuration:"500ms"},r.a.createElement(i.A,null)),r.a.createElement(i.m,{vertical:"bottom",horizontal:"center",slot:"fixed",id:"fab",onClick:function(){return c(!0)}},r.a.createElement(i.n,null,r.a.createElement(i.q,{icon:u.r,id:"trashButton"}))),r.a.createElement(i.b,{isOpen:o,onDidDismiss:function(){return c(!1)},cssClass:"my-custom-class",header:"Alert",subHeader:"Subtitle",message:g.message,inputs:g.input,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Okay",handler:function(){l({type:"DELREPO"})}}]}),r.a.createElement(i.o,null,r.a.createElement(i.C,null,r.a.createElement(i.k,{sizeMd:"10",sizeSm:"12",pushMd:"1"}," ",r.a.createElement(i.f,null,r.a.createElement(i.h,null,r.a.createElement(i.i,null,null===(e=s.user)||void 0===e?void 0:e.toUpperCase())),d?r.a.createElement(i.g,null,r.a.createElement(i.v,null,p.length?p.map((function(e,t){return r.a.createElement(i.s,{key:t,button:!0},r.a.createElement(i.t,null,r.a.createElement("a",{href:e.html_url},e.name)),r.a.createElement(i.j,{onClick:function(){return t=e.full_name,void l({type:"SELECTED",payload:{repo:t}});var t}}))})):r.a.createElement(i.s,null,r.a.createElement(i.t,null,"Nothing to show")))):s.repoLoading?r.a.createElement(i.g,null,r.a.createElement(i.D,{animated:!0,style:{width:"60%",height:"50px"}}),r.a.createElement(i.D,{animated:!0,style:{width:"70%",height:"50px"}}),r.a.createElement(i.D,{animated:!0,style:{width:"88%",height:"50px"}}),r.a.createElement(i.D,{animated:!0,style:{width:"70%",height:"50px"}}),r.a.createElement(i.D,{animated:!0,style:{width:"60%",height:"50px"}})):r.a.createElement(i.g,null,r.a.createElement(i.C,{className:" ion-align-items-center"},r.a.createElement(i.k,{sizeXs:"12",sizeMd:"6"},r.a.createElement(i.r,{src:J.a})),r.a.createElement(i.k,{pushMd:"3",pushXs:"4"},r.a.createElement(i.e,{onClick:function(){s.login||M()}},"Login"))))," ")))))},$=function(){return r.a.createElement(i.y,null,r.a.createElement(H,null),r.a.createElement(K,null),r.a.createElement(B,null))},Q=(n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),function(){return r.a.createElement(i.c,null,r.a.createElement(l.a,null,r.a.createElement(i.B,null,r.a.createElement(s.c,{path:"/home",component:$,exact:!0}),r.a.createElement(s.c,{exact:!0,path:"/",render:function(){return r.a.createElement(s.b,{to:"/home"})}}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(m.a,{store:F},r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[64,9,10]]]);
//# sourceMappingURL=main.a1b34328.chunk.js.map