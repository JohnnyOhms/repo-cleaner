(this["webpackJsonprepo-cleaner"]=this["webpackJsonprepo-cleaner"]||[]).push([[7],{61:function(e,t,n){e.exports=n.p+"static/media/trash.d22e9eed.svg"},64:function(e,t,n){e.exports=n(91)},70:function(e,t,n){var a={"./ion-action-sheet-ios.entry.js":[95,11],"./ion-action-sheet-md.entry.js":[96,12],"./ion-alert-ios.entry.js":[97,13],"./ion-alert-md.entry.js":[98,14],"./ion-app_8-ios.entry.js":[99,15],"./ion-app_8-md.entry.js":[100,16],"./ion-avatar_3-ios.entry.js":[101,33],"./ion-avatar_3-md.entry.js":[102,34],"./ion-back-button-ios.entry.js":[103,35],"./ion-back-button-md.entry.js":[104,36],"./ion-backdrop-ios.entry.js":[105,77],"./ion-backdrop-md.entry.js":[106,78],"./ion-button_2-ios.entry.js":[107,37],"./ion-button_2-md.entry.js":[108,38],"./ion-card_5-ios.entry.js":[109,39],"./ion-card_5-md.entry.js":[110,40],"./ion-checkbox-ios.entry.js":[111,41],"./ion-checkbox-md.entry.js":[112,42],"./ion-chip-ios.entry.js":[113,43],"./ion-chip-md.entry.js":[114,44],"./ion-col_3.entry.js":[115,79],"./ion-datetime_3-ios.entry.js":[116,21],"./ion-datetime_3-md.entry.js":[117,22],"./ion-fab_3-ios.entry.js":[118,45],"./ion-fab_3-md.entry.js":[119,46],"./ion-img.entry.js":[120,80],"./ion-infinite-scroll_2-ios.entry.js":[121,81],"./ion-infinite-scroll_2-md.entry.js":[122,82],"./ion-input-ios.entry.js":[123,47],"./ion-input-md.entry.js":[124,48],"./ion-item-option_3-ios.entry.js":[125,49],"./ion-item-option_3-md.entry.js":[126,50],"./ion-item_8-ios.entry.js":[127,51],"./ion-item_8-md.entry.js":[128,52],"./ion-loading-ios.entry.js":[129,53],"./ion-loading-md.entry.js":[130,54],"./ion-menu_3-ios.entry.js":[131,55],"./ion-menu_3-md.entry.js":[132,56],"./ion-modal-ios.entry.js":[133,17],"./ion-modal-md.entry.js":[134,18],"./ion-nav_2.entry.js":[135,29],"./ion-popover-ios.entry.js":[136,19],"./ion-popover-md.entry.js":[137,20],"./ion-progress-bar-ios.entry.js":[138,57],"./ion-progress-bar-md.entry.js":[139,58],"./ion-radio_2-ios.entry.js":[140,59],"./ion-radio_2-md.entry.js":[141,60],"./ion-range-ios.entry.js":[142,61],"./ion-range-md.entry.js":[143,62],"./ion-refresher_2-ios.entry.js":[144,23],"./ion-refresher_2-md.entry.js":[145,24],"./ion-reorder_2-ios.entry.js":[146,31],"./ion-reorder_2-md.entry.js":[147,32],"./ion-ripple-effect.entry.js":[148,83],"./ion-route_4.entry.js":[149,63],"./ion-searchbar-ios.entry.js":[150,64],"./ion-searchbar-md.entry.js":[151,65],"./ion-segment_2-ios.entry.js":[152,66],"./ion-segment_2-md.entry.js":[153,67],"./ion-select_3-ios.entry.js":[154,68],"./ion-select_3-md.entry.js":[155,69],"./ion-slide_2-ios.entry.js":[156,84],"./ion-slide_2-md.entry.js":[157,85],"./ion-spinner.entry.js":[158,27],"./ion-split-pane-ios.entry.js":[159,86],"./ion-split-pane-md.entry.js":[160,87],"./ion-tab-bar_2-ios.entry.js":[161,70],"./ion-tab-bar_2-md.entry.js":[162,71],"./ion-tab_2.entry.js":[163,30],"./ion-text.entry.js":[164,72],"./ion-textarea-ios.entry.js":[165,73],"./ion-textarea-md.entry.js":[166,74],"./ion-toast-ios.entry.js":[167,75],"./ion-toast-md.entry.js":[168,76],"./ion-toggle-ios.entry.js":[169,25],"./ion-toggle-md.entry.js":[170,26],"./ion-virtual-scroll.entry.js":[171,88]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=70,e.exports=r},72:function(e,t,n){var a={"./ion-icon.entry.js":[173,91]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=72,e.exports=r},77:function(e,t,n){},78:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(33),c=n.n(o),i=n(9),s=n(3),l=n(58),u=(n(77),n(35)),m=n(11),d=(n(78),n(21)),p=n(8),y=n.n(p),g=n(25),h=n(60),j=n.n(h),b=n(32),E=n(63),O=n(30),f=n(18),v=localStorage.getItem("login"),x=localStorage.getItem("token"),k={login:!!v,loginLoading:!1,repoLoading:!1,repos:[],user:localStorage.getItem("user"),avatar:"./dummy.png",token:!!x,selected:[],error:!1,avatarLoading:!1,showToast:!1},_={login:!1,loginLoading:!1,repoLoading:!1,repos:[],user:null,avatar:"./dummy.png",token:!1,selected:[],error:!1,avatarLoading:!1,showToast:!1},w=n(10),L=y.a.mark(R),I=y.a.mark(N),T=y.a.mark(S),A=y.a.mark(G),D=y.a.mark(C);function R(e){var t,n,a,r,o,c,i,s,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),n=localStorage.getItem("user"),a=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.next=6,Object(w.c)({type:"REPOLOADING",payload:{loading:!0}});case 6:return e.next=8,a(3e3);case 8:if(n){e.next=17;break}return e.next=11,Object(w.c)({type:"AVATARLOADING",payload:{loading:!0}});case 11:return e.next=13,Object(w.c)({type:"LOGINLOADING",payload:{loading:!0}});case 13:return e.next=15,Object(w.c)({type:"GETUSER",payload:{token:t}});case 15:e.next=23;break;case 17:return e.next=19,Object(w.c)({type:"AVATARLOADING",payload:{loading:!0}});case 19:r=new Image(100,200),o="https://github.com/".concat(n,".png"),r.src=o,r.onload=function(){(0,H.dispatch)({type:"AVATARLOADING",payload:{loading:!1}})};case 23:return e.next=25,Object(w.b)(fetch,"https://api.github.com/user/repos?per_page=100",{headers:{Authorization:"token ".concat(t)},cache:"no-cache"});case 25:return c=e.sent,e.next=28,c.json();case 28:if(!((i=e.sent).length>=100)){e.next=37;break}return e.next=32,Object(w.b)(fetch,"https://api.github.com/user/repos?page=2&per_page=100",{headers:{Authorization:"token ".concat(t)},cache:"no-cache"});case 32:return s=e.sent,e.next=35,s.json();case 35:s=e.sent,i=[].concat(Object(O.a)(i),Object(O.a)(s));case 37:if(!(i.length>=200)){e.next=45;break}return e.next=40,Object(w.b)(fetch,"https://api.github.com/user/repos?page=3&per_page=100",{headers:{Authorization:"token ".concat(t)},cache:"no-cache"});case 40:return l=e.sent,e.next=43,l.json();case 43:l=e.sent,i=[].concat(Object(O.a)(i),Object(O.a)(l));case 45:return i=i.map((function(e){return{full_name:e.full_name,html_url:e.html_url,name:e.name}})),e.next=48,Object(w.c)({type:"REPOLOADING",payload:{loading:!1}});case 48:return e.next=50,Object(w.c)({type:"REPOS",payload:{repos:i}});case 50:e.next=56;break;case 52:return e.prev=52,e.t0=e.catch(0),e.next=56,Object(w.c)({type:"ERROR",payload:{error:e.t0}});case 56:case"end":return e.stop()}}),L,null,[[0,52]])}function N(){var e,t;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(w.c)({type:"REPOLOADING",payload:{loading:!0}});case 3:return e=localStorage.getItem("token"),n.next=6,Object(w.c)({type:"DELETING",payload:{complete:!1}});case 6:return n.next=8,Object(w.d)((function(e){return e.selected}));case 8:return t=n.sent,n.next=11,Object(w.a)(t.map((function(t){return Object(w.b)(fetch,"https://api.github.com/repos/".concat(t),{headers:{Authorization:"token ".concat(e)},method:"DELETE"})})));case 11:return n.sent,n.next=14,Object(w.c)({type:"GETREPO"});case 14:return n.next=16,Object(w.c)({type:"DELETING",payload:{complete:!0}});case 16:n.next=22;break;case 18:return n.prev=18,n.t0=n.catch(0),n.next=22,Object(w.c)({type:"ERROR",payload:{error:n.t0}});case 22:case"end":return n.stop()}}),I,null,[[0,18]])}function S(e){var t,n,a,r,o;return y.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload.token,c.next=4,Object(w.b)(fetch,"https://api.github.com/user",{headers:{Authorization:"token ".concat(t)},cache:"no-cache"});case 4:return n=c.sent,c.next=7,n.json();case 7:return a=c.sent,localStorage.setItem("user",a.login),localStorage.setItem("login","true"),c.next=12,Object(w.c)({type:"LOGINLOADING",payload:{user:a.login,loading:!1}});case 12:r=new Image(100,200),o="https://github.com/".concat(a.login,".png"),r.src=o,r.onload=function(){(0,H.dispatch)({type:"AVATARLOADING",payload:{loading:!1}})},c.next=22;break;case 18:return c.prev=18,c.t0=c.catch(0),c.next=22,Object(w.c)({type:"ERROR",payload:c.t0});case 22:case"end":return c.stop()}}),T,null,[[0,18]])}function G(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.c)({type:"RESET"});case 2:window.location.href="https://github.com/logout";case 3:case"end":return e.stop()}}),A)}function C(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.e)("GETREPO",R);case 2:return e.next=4,Object(w.e)("GETUSER",S);case 4:return e.next=6,Object(w.e)("DELREPO",N);case 6:return e.next=8,Object(w.e)("LOGOUT",G);case 8:case"end":return e.stop()}}),D)}var P=Object(E.a)(),z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||b.c,U=Object(b.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(console.log("in reducer"),t.type){case"LOGIN":t.payload.val;return Object(f.a)({},e);case"LOGINLOADING":var n=t.payload,a=n.user,r=n.loading;return Object(f.a)(Object(f.a)({},e),{},{user:a,loginLoading:r,login:!0});case"REPOLOADING":var o=t.payload.loading;return console.log("chikn",o),Object(f.a)(Object(f.a)({},e),{},{repoLoading:o});case"AVATARLOADING":var c,i=t.payload.loading;if(i)c="./loader.gif";else{var s=localStorage.getItem("user");c="https://github.com/".concat(s,".png")}return Object(f.a)(Object(f.a)({},e),{},{avatar:c});case"REPOS":var l=t.payload.repos;return Object(f.a)(Object(f.a)({},e),{},{repos:l});case"SHOWTOAST":var u=t.payload.showToast;return Object(f.a)(Object(f.a)({},e),{},{showToast:u});case"AVATAR":t.payload.val;return Object(f.a)({},e);case"TOKEN":t.payload.val;return Object(f.a)({},e);case"SELECTED":var m=t.payload.repo,d=Object(O.a)(e.selected);return d=d.includes(m)?d.filter((function(e){return e!=m})):[].concat(Object(O.a)(e.selected),[m]),console.log(d),Object(f.a)(Object(f.a)({},e),{},{selected:d});case"DELETING":var p=t.payload.complete,y=Object(O.a)(e.selected);return p&&(y=[]),Object(f.a)(Object(f.a)({},e),{},{showToast:p,selected:y});case"RESET":return localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("login"),Object(f.a)({},_);default:return e}}),z(Object(b.a)(P)));P.run(C),v&&U.dispatch({type:"GETREPO"});var F,H=U;function M(){return V.apply(this,arguments)}function V(){return(V=Object(g.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){new j.a({site_id:"cc1fae4e-b947-4f8c-803a-d57b2d347ac0"}).authenticate({provider:"github",scope:"user,delete_repo"},(function(n,a){n&&t(n),console.log(a.token),F=a.token,localStorage.setItem("token",F),H.dispatch({type:"GETREPO",payload:{Token:F}}),console.log("ben"),e(a)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e})),n=Object(a.useState)(!1),o=Object(u.a)(n,2),c=o[0],i=o[1],l={text:"Login",icon:m.i};t.user?(l.text="Signout",l.icon=m.j):(l.text="Login",l.icon=m.i);return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.w,{side:"start",contentId:"first",menuId:"first"},r.a.createElement(s.p,{color:"primary"},r.a.createElement(s.H,{color:"primary"},r.a.createElement(s.F,null,"Repo Cleaner"))),r.a.createElement("span",{id:"first"}),r.a.createElement(s.l,null,r.a.createElement(s.d,{className:"ion-margin "},r.a.createElement("img",{src:t.avatar})),r.a.createElement(s.E,{class:"ion-margin"},t.user),r.a.createElement(s.v,null,r.a.createElement(s.s,{onClick:function(){t.login?i(!0):M()}},r.a.createElement("a",null,r.a.createElement(s.q,{icon:l.icon,className:"ion-margin-end"}),l.text)),r.a.createElement(s.s,null,r.a.createElement("a",{href:"https://github.com/sammychinedu2ky/repo-cleaner",target:"_blank"},r.a.createElement(s.q,{icon:m.k,className:"ion-margin-end"}),"Fork@GitHub"))),r.a.createElement(s.b,{isOpen:c,onDidDismiss:function(){return i(!1)},header:"Alert",subHeader:"Signout",message:"You would be redirected to github to finish the signout process",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Okay",handler:function(){e({type:"LOGOUT"})}}]}))))},B=function(){var e=Object(d.b)(),t=Object(a.useState)(!1),n=Object(u.a)(t,2),o=n[0],c=n[1],i=Object(d.c)((function(e){return e})),l={text:"Login",icon:m.i};i.user?(l.text="Signout",l.icon=m.j):(l.text="Login",l.icon=m.i);return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.p,null,r.a.createElement(s.H,null,r.a.createElement(s.x,{slot:"start"}),r.a.createElement(s.F,{slot:"start"},r.a.createElement(s.q,{id:"repoIcon",icon:m.h,color:"primary"}),r.a.createElement(s.E,{color:"primary"},r.a.createElement("span",{id:"repoTitle"},"Repo Cleaner"))),r.a.createElement(s.E,{slot:"primary",className:"ion-margin ion-hide-md-down",onClick:function(){i.login?c(!0):M()}},r.a.createElement("a",{target:"_blank"},l.text)),r.a.createElement(s.E,{slot:"primary",className:"ion-margin"},r.a.createElement("a",{href:"https://github.com/sammychinedu2ky/repo-cleaner",target:"_blank"},r.a.createElement(s.q,{icon:m.k}))),r.a.createElement(s.d,{id:"avatar",slot:"primary",className:"ion-padding ion-hide-md-down"},r.a.createElement("img",{id:"avatarImg",src:i.avatar})),r.a.createElement(s.b,{isOpen:o,onDidDismiss:function(){return c(!1)},header:"Alert",subHeader:"Signout",message:"You would be redirected to github to finish the signout process",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Okay",handler:function(){e({type:"LOGOUT"})}}]}))),r.a.createElement(q,null))},X=function(){var e=Object(d.c)((function(e){return e.showToast}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.G,{isOpen:e,message:"Deletion completed",duration:200}))},W=n(61),J=n.n(W),Y=function(){var e,t,n=Object(a.useState)(!1),o=Object(u.a)(n,2),c=o[0],i=o[1],l=Object(d.c)((function(e){return e})),p=Object(d.b)(),y=l.repos;t=!(!y.length||l.repoLoading);var g={input:l.selected.map((function(e){return{name:"repo",type:"checkbox",label:e,checked:!0,disabled:!0}})),message:l.selected.length?"Sure to delete?":"Nothing selected"};return r.a.createElement(s.l,null,r.a.createElement(s.z,{slot:"fixed",onIonRefresh:function(e){l.login&&(p({type:"GETREPO"}),setTimeout((function(){e.detail.complete()}),2e3))},closeDuration:"500ms"},r.a.createElement(s.A,null)),r.a.createElement(s.m,{vertical:"bottom",horizontal:"center",slot:"fixed",id:"fab",onClick:function(){return i(!0)}},r.a.createElement(s.n,null,r.a.createElement(s.q,{icon:m.r,id:"trashButton"}))),r.a.createElement(s.b,{isOpen:c,onDidDismiss:function(){return i(!1)},header:"Alert",subHeader:"Delete Repos",message:g.message,inputs:g.input,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Okay",handler:function(){l.selected.length&&p({type:"DELREPO"})}}]}),r.a.createElement(s.o,null,r.a.createElement(s.C,null,r.a.createElement(s.k,{sizeMd:"10",sizeSm:"12",pushMd:"1"}," ",r.a.createElement(s.f,null,r.a.createElement(s.h,null,r.a.createElement(s.i,null,null===(e=l.user)||void 0===e?void 0:e.toUpperCase())),t?r.a.createElement(s.g,null,r.a.createElement(s.v,null,y.length?y.map((function(e,t){return r.a.createElement(s.s,{key:t,button:!0},r.a.createElement(s.t,null,r.a.createElement("a",{href:e.html_url},e.name)),r.a.createElement(s.j,{onClick:function(){return t=e.full_name,void p({type:"SELECTED",payload:{repo:t}});var t}}))})):r.a.createElement(s.s,null,r.a.createElement(s.t,null,"Nothing to show")))):l.repoLoading?r.a.createElement(s.g,null,r.a.createElement(s.D,{animated:!0,style:{width:"60%",height:"50px"}}),r.a.createElement(s.D,{animated:!0,style:{width:"70%",height:"50px"}}),r.a.createElement(s.D,{animated:!0,style:{width:"88%",height:"50px"}}),r.a.createElement(s.D,{animated:!0,style:{width:"70%",height:"50px"}}),r.a.createElement(s.D,{animated:!0,style:{width:"60%",height:"50px"}})):r.a.createElement(s.g,null,r.a.createElement(s.C,{className:" ion-align-items-center"},r.a.createElement(s.k,{sizeXs:"12",sizeMd:"6"},r.a.createElement(s.r,{src:J.a})),r.a.createElement(s.k,{pushMd:"3",pushXs:"4"},r.a.createElement(s.e,{onClick:function(){l.login||M()}},"Login"))))," ")))))},K=function(){return r.a.createElement(s.y,null,r.a.createElement(B,null),r.a.createElement(Y,null),r.a.createElement(X,null))},$=(n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),function(){return r.a.createElement(s.c,null,r.a.createElement(l.a,null,r.a.createElement(s.B,null,r.a.createElement(i.c,{exact:!0,path:"/",component:K}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(d.a,{store:H},r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[64,9,10]]]);
//# sourceMappingURL=main.7b635fc5.chunk.js.map